{{> rev-unit1 }}

{{#if isOwnUser}}
    <h1>Your Profile</h1>
{{else}}
    <h1>{{username}}'s Profile</h1>
{{/if}}

<div class="text-right mb-3">
    {{> social-media shareUrl=shareUrl showCopyButton=true }}
</div>

<!-- Lists logic -->
<h2>Lists</h2>
{{#if isOwnUser}}
    <div class="text-right mb-3">
        <ul class="list-unstyled">
            <li>
                <a href="/list/create">
                    <span class="fas fa-plus"></span>
                    Create a new list
                </a>
            </li>
            <li>
                <a style="padding-left: 3px" href="/list/import">
                    <span class="fas fa-upload"></span>
                    Import with CatalogScanner
                </a>
            </li>
        </ul>
    </div>
{{/if}}
{{#if hasLists}}
    <ul class="list-group user-list-view mb-4">
        {{#each lists}}
            <li class="list-group-item d-flex justify-content-between align-items-center deletable-item">
                <div>
                    <a href="/user/{{../username}}/list/{{id}}">{{name}}</a>
                </div>
                {{#if ../isOwnUser}}
                    <a href="#" data-posturl="/list/delete/{{id}}" data-shouldconfirm="true"
                       class="btn btn-danger delete-object-button" role="button">
                        <span class="fa fa-trash"></span>
                        <span class="sr-only">Delete</span>
                    </a>
                {{/if}}
            </li>
        {{/each}}
    </ul>
{{else}}
    {{#if isOwnUser}}
        <p>
            You have not added any lists yet. You can create one by using the <span class="fas fa-plus"></span> link on
            the top right, or
            <a href="/list/create">clicking here</a>.
        </p>
    {{else}}
        <p>This user has not created any lists yet.</p>
    {{/if}}
{{/if}}

<!-- Towns logic -->
<h2>Towns</h2>
{{#if isOwnUser}}
    <div class="text-right mb-3">
        <ul class="list-unstyled">
            <li>
                <a href="/town/create">
                    <span class="fas fa-plus"></span>
                    Add dream town
                </a>
            </li>
        </ul>
    </div>
{{/if}}
{{#if hasTowns}}
    <div class="row">
        {{#each towns}}
            <div class="col-12 col-md-6 mb-2 deletable-item">
                <div class="card" style="width: 300px; margin: 0 auto;">
                    <img class="card-img-top" style="max-height: 300px;" src="/images/towns/thumb/{{image}}" alt="Image for {{townName}}">
                    <div class="card-body">
                        <h3><a href="/user/{{../username}}/town/{{townId}}">{{townName}}</a></h3>
                        <div class="card-text">
                            <p class="text-muted">{{townAddress}}</p>
                            <p>{{townDescription}}</p>
                            <p>Tags: {{townTags}}</p>
                            {{#if ../isOwnUser}}
                                <div class="text-right">
                                    <a href="#" data-posturl="/town/delete/{{townId}}" data-shouldconfirm="true"
                                       class="btn btn-danger delete-object-button" data-delete-target="town-{{townId}}"
                                       role="button">
                                        <span class="fa fa-trash"></span>
                                        <span class="sr-only">Delete</span>
                                    </a>
                                </div>
                            {{/if}}
                        </div>
                    </div>
                </div>
            </div>
        {{/each}}
    </div>
{{else}}
    {{#if isOwnUser}}
        <p>
            You have not added your dream towns yet. You can add one by using the <span class="fas fa-plus"></span> link on
            the top right, or
            <a href="/town/create">clicking here</a>.
        </p>
    {{else}}
        <p>This user has not added their dream addresses yet.</p>
    {{/if}}
{{/if}}

<!-- Account management logic -->
{{#if isOwnUser}}
    <p class="mt-4">You can manage your account by clicking <a href="/auth/manage">here</a>.</p>
{{/if}}